<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Yasmin, Be My Valentine üíñ</title>
  <style>
    :root{--bg1:#ff9a9e;--bg2:#fad0c4;--accent:#ff4d6d}
    html,body{height:100%;margin:0}
    body{font-family:system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,var(--bg1),var(--bg2));padding:18px}
    .card{background:rgba(255,255,255,0.96);border-radius:18px;padding:18px;max-width:520px;width:100%;box-shadow:0 20px 50px rgba(0,0,0,0.16);text-align:center;position:relative;overflow:hidden}
    video{width:100%;border-radius:12px;display:block;margin-bottom:14px;background:#000}
    h1{color:var(--accent);margin:8px 0;font-size:1.5rem}
    p{color:#333;margin:8px 0;font-size:1rem}
    .controls{margin-top:14px;display:flex;gap:12px;justify-content:center;align-items:center}
    button{padding:12px 18px;border-radius:999px;border:none;font-size:16px;cursor:pointer;touch-action:manipulation}
    .btn-primary{background:linear-gradient(135deg,#ff4d6d,#ff758f);color:#fff}
    .btn-ghost{background:#f3f3f3;color:#333}
    .hearts{position:fixed;inset:0;pointer-events:none;overflow:hidden;z-index:1}
    .heart{position:absolute;font-size:20px;animation:rise linear forwards;will-change:transform,opacity}
    @keyframes rise{from{transform:translateY(100vh);opacity:1}to{transform:translateY(-10vh);opacity:0}}

    /* bear emoji styling */
    .bear { font-size:72px; line-height:1; margin:6px 0 10px; }

    /* letters (Y+V) after celebration */
    .letters { position:fixed; inset:0; display:flex; align-items:center; justify-content:center; pointer-events:none; z-index:50; }
    .letter { font-size:96px; font-weight:700; color:#c77dff; margin: 0 12px; opacity:0; transform:scale(0.6); transition: all 900ms cubic-bezier(.2,.9,.2,1); }
    .letter.show { opacity:1; transform:scale(1); }

    @media (max-width:420px){h1{font-size:1.25rem}.card{padding:14px}.bear{font-size:48px}.letter{font-size:56px}}
  </style>
</head>
<body>
  <div class="hearts" id="hearts" aria-hidden="true"></div>

  <!-- Intro card: No Skip button per request -->
  <div class="card" id="introCard" aria-hidden="false">
    <video id="introVideo" autoplay muted loop playsinline>
      <source src="yasmin.mp4" type="video/mp4">
      Your browser does not support the video tag or the file is not available.
    </video>

    <h1>Hi Yasmine</h1>
    <p id="introText">It's been a long time coming, and I want to ask:</p>

    <div class="controls">
      <button id="nextBtn" class="btn-primary" aria-label="Next">Next</button>
    </div>
  </div>

  <!-- Question card -->
  <div class="card" id="questionCard" style="display:none" aria-hidden="true">
    <!-- cute bear -->
    <div class="bear">üêª</div>
    <h1>Will you be my Valentine?</h1>
    <p id="messageText">If yes, press the heart. If not, press the broken heart ‚Äî I'll still smile. üòä</p>

    <div class="controls" id="buttonRow">
      <button id="yesBtn" class="btn-primary">Yes ‚ù§Ô∏è</button>
      <button id="noBtn" class="btn-ghost">No üíî</button>
    </div>
  </div>

  <div class="letters" id="letters" aria-hidden="true" style="display:none">
    <div class="letter" id="letterY">Y</div>
    <div class="letter" id="letterPlus">+</div>
    <div class="letter" id="letterV">V</div>
  </div>

  <script>
    const introCard = document.getElementById('introCard');
    const questionCard = document.getElementById('questionCard');
    const nextBtn = document.getElementById('nextBtn');
    const yesBtn = document.getElementById('yesBtn');
    const noBtn = document.getElementById('noBtn');
    const messageText = document.getElementById('messageText');
    const heartsRoot = document.getElementById('hearts');
    const lettersWrap = document.getElementById('letters');
    const letterY = document.getElementById('letterY');
    const letterPlus = document.getElementById('letterPlus');
    const letterV = document.getElementById('letterV');

    let noCount = 0;
    let evasive = false;
    let evadeInterval = null;

    const noMessages = [
      'Are you sure?',
      'Think again...',
      'Please don\'t say no...',
      'Do you want Victor to die?'
    ];

    function spawnFloating(symbol = '‚ù§Ô∏è', count = 30, durationBase = 3.5) {
      for (let i = 0; i < count; i++) {
        const el = document.createElement('div');
        el.className = 'heart';
        el.textContent = symbol;
        const size = Math.round(14 + Math.random() * 30);
        el.style.fontSize = size + 'px';
        el.style.left = (Math.random() * 90) + 'vw';
        el.style.animationDuration = (durationBase + Math.random() * 3) + 's';
        heartsRoot.appendChild(el);
        setTimeout(() => { try { el.remove(); } catch(e){} }, (durationBase + 4) * 1000);
      }
    }

    // Move to question when Next is pressed
    nextBtn.addEventListener('click', () => {
      introCard.style.display = 'none';
      introCard.setAttribute('aria-hidden', 'true');
      questionCard.style.display = 'block';
      questionCard.setAttribute('aria-hidden', 'false');
      spawnFloating('üíû', 14, 3.2);
    });

    // No button logic
    function makeNoEvasive() {
      evasive = true;
      // change to absolute positioning inside question card so we can move it
      noBtn.style.position = 'absolute';
      noBtn.style.zIndex = 5;
      // start interval that nudges it occasionally so it keeps moving away
      if (evadeInterval) clearInterval(evadeInterval);
      evadeInterval = setInterval(() => moveNoRandom(), 700 + Math.random()*600);
    }

    function moveNoRandom() {
      const parent = questionCard.getBoundingClientRect();
      const btn = noBtn.getBoundingClientRect();
      const padding = 10;
      const maxLeft = Math.max(0, parent.width - btn.width - padding);
      const maxTop = Math.max(0, parent.height - btn.height - padding);
      const left = Math.random() * maxLeft; // relative to parent
      const top = Math.random() * maxTop;
      noBtn.style.left = left + 'px';
      noBtn.style.top = top + 'px';
    }

    noBtn.addEventListener('click', (e) => {
      e.stopPropagation();
      noCount++;

      // messages
      const msgIndex = Math.min(noCount - 1, noMessages.length - 1);
      messageText.textContent = noMessages[msgIndex];

      if (noCount <= 3) {
        // shrink the No button progressively
        const scaleDown = Math.max(0.3, 1 - noCount * 0.18);
        noBtn.style.transform = `scale(${scaleDown})`;
        // grow the Yes button
        const yesScale = 1 + noCount * 0.18;
        yesBtn.style.transform = `scale(${yesScale})`;
      } else {
        // after third time, start evasive behavior
        if (!evasive) makeNoEvasive();
        // immediate dodge when clicked
        moveNoRandom();
      }

      // spawn a broken heart each time
      spawnFloating('üíî', 8, 2.6);
    });

    // make the No button move away on hover/touchmove once evasive
    noBtn.addEventListener('mouseenter', () => { if (evasive) moveNoRandom(); });
    noBtn.addEventListener('touchstart', (e) => { if (evasive) { e.preventDefault(); moveNoRandom(); } });

    // Yes button logic
    yesBtn.addEventListener('click', () => {
      // stop evasive interval if running
      if (evadeInterval) { clearInterval(evadeInterval); evadeInterval = null; }
      // celebration: replace question card with success content (keep last texts)
      questionCard.innerHTML = `\n        <h1>She said YES üíñ</h1>\n        <p>Happy Valentine's Day, Yasmine üå∑</p>\n        <p style="font-weight:600; margin-top:10px;">‚Äî Yours, Victor ‚ù§Ô∏è</p>\n        <p style="margin-top:8px; font-size:0.95rem; color:#666;">Take a screenshot to save this moment üì∏</p>\n      `;

      // letters and flower burst
      spawnFloating('üå∏', 140, 3.2);
      // delay then show letters Y + V
      setTimeout(() => {
        lettersWrap.style.display = 'flex';
        // animate letters in
        setTimeout(()=> letterY.classList.add('show'), 120);
        setTimeout(()=> letterPlus.classList.add('show'), 420);
        setTimeout(()=> letterV.classList.add('show'), 720);
        // hide letters after some time
        setTimeout(()=> { lettersWrap.style.display = 'none'; letterY.classList.remove('show'); letterPlus.classList.remove('show'); letterV.classList.remove('show'); }, 4000);
      }, 600);
    });

    // gentle ongoing background effect
    setInterval(() => spawnFloating('‚ù§Ô∏è', 1, 8), 900);
  </script>
</body>
</html>
